<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <title>My Chart.js Chart</title>
</head>
<body>
  <div class="container">
    <canvas id="myChart"></canvas>
  </div>

  <script>let datos = [
    {
        "compra_id": 1,
        "user_id": 12,
        "fecha": "Thu Sep 29 2022 22:32:34 GMT-0500 (Colombia Standard Time)",
        "product_id": 14
    },
    {
        "compra_id": 2,
        "user_id": 11,
        "fecha": "Thu Sep 29 2022 22:32:35 GMT-0500 (Colombia Standard Time)",
        "product_id": 26
    },
    {
        "compra_id": 3,
        "user_id": 15,
        "fecha": "Thu Sep 29 2022 22:32:37 GMT-0500 (Colombia Standard Time)",
        "product_id": 17
    },
    {
        "compra_id": 4,
        "user_id": 8,
        "fecha": "Thu Sep 29 2022 22:32:38 GMT-0500 (Colombia Standard Time)",
        "product_id": 23
    },
    {
        "compra_id": 5,
        "user_id": 12,
        "fecha": "Thu Sep 29 2022 22:32:39 GMT-0500 (Colombia Standard Time)",
        "product_id": 5
    },
    {
        "compra_id": 6,
        "user_id": 11,
        "fecha": "Thu Sep 29 2022 22:32:40 GMT-0500 (Colombia Standard Time)",
        "product_id": 6
    },
    {
        "compra_id": 7,
        "user_id": 12,
        "fecha": "Thu Sep 29 2022 22:32:42 GMT-0500 (Colombia Standard Time)",
        "product_id": 1
    },
    {
        "compra_id": 8,
        "user_id": 5,
        "fecha": "Thu Sep 29 2022 22:32:43 GMT-0500 (Colombia Standard Time)",
        "product_id": 17
    },
    {
        "compra_id": 9,
        "user_id": 1,
        "fecha": "Thu Sep 29 2022 22:32:44 GMT-0500 (Colombia Standard Time)",
        "product_id": 17
    },
    {
        "compra_id": 10,
        "user_id": 13,
        "fecha": "Thu Sep 29 2022 22:32:45 GMT-0500 (Colombia Standard Time)",
        "product_id": 26
    },
    {
        "compra_id": 11,
        "user_id": 4,
        "fecha": "Thu Sep 29 2022 22:32:46 GMT-0500 (Colombia Standard Time)",
        "product_id": 24
    },
    {
        "compra_id": 12,
        "user_id": 2,
        "fecha": "Thu Sep 29 2022 22:32:48 GMT-0500 (Colombia Standard Time)",
        "product_id": 21
    },
    {
        "compra_id": 13,
        "user_id": 5,
        "fecha": "Thu Sep 29 2022 22:32:49 GMT-0500 (Colombia Standard Time)",
        "product_id": 2
    },
    {
        "compra_id": 14,
        "user_id": 8,
        "fecha": "Thu Sep 29 2022 22:32:50 GMT-0500 (Colombia Standard Time)",
        "product_id": 28
    },
    {
        "compra_id": 15,
        "user_id": 8,
        "fecha": "Thu Sep 29 2022 22:32:51 GMT-0500 (Colombia Standard Time)",
        "product_id": 20
    },
    {
        "compra_id": 16,
        "user_id": 5,
        "fecha": "Tue Nov 01 2022 23:50:40 GMT-0500 (Colombia Standard Time)",
        "product_id": 8
    }
];
let usuarios = [];
let bandera = false;
for(let x = 0; x < datos.length; x++){
    for(let y = 0; y < usuarios.length; y++)// console.log(datos[x].user_id);
    // console.log("asatsegkdj;lfdsajkl"+usuarios[y].user_id);
    if (datos[x].user_id == usuarios[y].user) {
        usuarios[y].cantidad = usuarios[y].cantidad + 1;
        bandera = true;
    }
    if (bandera == true) {
        bandera = false;
        continue;
    }
    usuarios.push({
        user: datos[x].user_id,
        cantidad: 1
    });
}
console.log(usuarios);
let nombres = [];
let cantidad = [];
for(let z = 0; z < usuarios.length; z++){
    nombres.push(usuarios[z].user);
    cantidad.push(usuarios[z].cantidad);
}
const data = {
    labels: nombres,
    datasets: [
        {
            label: "cantidad",
            backgroundColor: [
                "rgba(255, 99, 132, 0.6)",
                "rgba(54, 162, 235, 0.6)",
                "rgba(255, 206, 86, 0.6)",
                "rgba(75, 192, 192, 0.6)",
                "rgba(153, 102, 255, 0.6)",
                "rgba(255, 159, 64, 0.6)",
                "rgba(255, 99, 132, 0.6)"
            ],
            borderWidth: 1,
            borderColor: "#777",
            hoverBorderWidth: 3,
            hoverBorderColor: "#000",
            data: cantidad
        }
    ]
};
console.log(cantidad);
const config = {
    type: "bar",
    data: data,
    options: {
        scales: {
            y: {
                max: Math.max.apply(Math, cantidad) + 1,
                min: 0,
                ticks: {
                    stepSize: 1
                }
            }
        },
        title: {
            display: true,
            text: "ID_vendedor vs cuanto ha vendido",
            fontSize: 25
        },
        legend: {
            display: false,
            position: "right",
            labels: {
                fontColor: "#000"
            }
        },
        layout: {
            padding: {
                left: 50,
                right: 0,
                bottom: 0,
                top: 0
            }
        },
        tooltips: {
            enabled: true
        }
    }
};
const myChart = new Chart(document.getElementById("myChart"), config);

</script>
<script src="/pruebaGraficas.1739811a.js"></script></body>
</html>
  